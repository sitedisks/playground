<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <link rel="shortcut icon" href="/favicon.png" />
    <meta charset="UTF-8">

    <meta property="fb:admins" content="1187258939" />
    <meta property="fb:app_id" content="123303097714935" />
    <meta name="twitter:card" content="app">
    <meta name="twitter:site" content="@healthengine">
    <meta name="twitter:description" content="Find & book health appointments, 24/7 with HealthEngine, Australiaâ€™s #1 healthcare app. Download now to book an appointment anytime, anywhere.">
    <meta name="twitter:app:name:iphone" content="HealthEngine">
    <meta name="twitter:app:id:iphone" content="498446578">
    <meta name="twitter:app:name:ipad" content="HealthEngine">
    <meta name="twitter:app:id:ipad" content="498446578">
    <meta name="twitter:app:name:googleplay" content="HealthEngine">
    <meta name="twitter:app:id:googleplay" content="com.healthengine.android">

    <meta property="og:title" content="HealthEngine" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://healthengine.com.au/chinese-medicine-practitioner/wa/yokine/dr-jinnan-cai/p51858" />
    <meta property="og:image" content="http://healthengine.com.au/images/survey_image_2.jpg" />
    <meta property="og:image:secure_url" content="https://healthengine.com.au/images/survey_image_2.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="145" />
    <meta property="og:image:height" content="145" />
    <meta property="og:site_name" content="HealthEngine" />
    <meta property="og:description" content="Find and book health appointments online, 24/7. View all available appointments in your local area and choose a time and place that suits you." />
    <meta name="description" content="Dr Jinnan Cai, Acupuncturist - Book an Appointment or View Bio, Qualifications, Contact Details &amp; More in the One Easy Location." />

    <title>Dr Jinnan Cai - Perth Acupuncturist - HealthEngine</title>

    <script type="text/javascript">
        if (navigator.userAgent.match(/(Android)/i)) {
            document.documentElement.classList.add('isandroid');
        }
        if (navigator.userAgent.match(/(iPhone|iPod)/i)) {
            document.documentElement.classList.add('isios');
        } else {
            document.documentElement.classList.add('no-isios');
        }
        if (navigator.userAgent.match(/(iPhone|iPod|iPad)/i)) {
            document.documentElement.classList.add('ismobileonly');
        } else {
            document.documentElement.classList.add('no-ismobileonly');
        }
    </script>

    <meta name="viewport" content="initial-scale=1.0,user-scalable=no" />


    <script>
        var heData = {
            "pageData": {
                "section": "Con",
                "subSection": "Profile",
                "pageType": "Practitioner"
            },
            "userData": {
                "loggedIn": "Anonymous"
            },
            "practitionerData": {
                "ID": "51858",
                "practitionerName": "Dr Jinnan Cai",
                "gender": "Male",
                "state": "WA",
                "postcode": "6060",
                "suburb": "Yokine",
                "primarySpecialty": "Acupuncture",
                "specialties": "Acupuncture, Chinese Medicine",
                "paidProfile": "true",
                "locationCount": "3",
                "hasCorporatePractice": "false",
                "apptCount": "0"
            }
        };
    </script>

    <script src="//assets.adobedtm.com/8ac2a7ef9f4cafab0acbea50eb60ca0903e9bcce/satelliteLib-30acabee20c2ce97c2bea6ec4bbf0ad2f1cce7d8.js"></script>
    <script type="text/javascript" src="//d2g92a8pyizotc.cloudfront.net/minify/g=site_js?v=20190214073553"></script>
    <link href="//d2g92a8pyizotc.cloudfront.net/minify/g=site_css_bootstrap?v=20190214073553" rel="stylesheet">
    <link href="//d2g92a8pyizotc.cloudfront.net/minify/g=site_css?v=20190214073553" rel="stylesheet">

    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,500italic,600italic,300,400,500,600|Source+Sans+Pro:300,400,500,600'
        rel='stylesheet' type='text/css'>


    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "name": "HealthEngine",
            "url": "https://healthengine.com.au"
        }
    </script>

    <link rel="manifest" href="/manifest.json" />
    <meta name="format-detection" content="telephone=no">

    <link href="//d2g92a8pyizotc.cloudfront.net/minify/g=practitioner_css?v=20190214073553" rel="stylesheet">
    <link rel="canonical" href="https://healthengine.com.au/chinese-medicine-practitioner/wa/yokine/dr-jinnan-cai/p51858" />
    <script>
        window.dataLayer = window.dataLayer || [];
        dataLayer.push({
            'websiteSection': "Patients"
        });
        dataLayer.push({
            'pageType': "Practitioner Profile"
        });
        dataLayer.push({
            'specialties': "Acupuncture, Chinese Medicine"
        });
        dataLayer.push({
            'state': "WA"
        });
        dataLayer.push({
            'postcode': "6060"
        });
        dataLayer.push({
            'profileType': "Paid"
        });
    </script>

    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                '//www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WGMQ');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Google DoubleClick for Publishers -->
    <script type='text/javascript'>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        (function () {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') +
                '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
    </script>

</head>

<body>

    <!-- https://branch.io/ -->
    <script type="text/javascript">
        (function (b, r, a, n, c, h, _, s, d, k) {
            if (!b[n] || !b[n]._q) {
                for (; s < _.length;) c(h, _[s++]);
                d = r.createElement(a);
                d.async = 1;
                d.src = "https://cdn.branch.io/branch-latest.min.js";
                k = r.getElementsByTagName(a)[0];
                k.parentNode.insertBefore(d, k);
                b[n] = h
            }
        })(window, document, "script", "branch", function (b, r) {
                b[r] = function () {
                    b._q.push([r, arguments])
                }
            }, {
                _q: [],
                _v: 1
            },
            "addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking"
            .split(" "), 0);
        branch.init('key_live_lnlOB5xN4Xt4BI7aKZ0yRfjnuwavDKsi');
    </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WGMQ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="global-sticky-search col-small-12">
        <div class="input-contain-unified-search">
            <form id="unified-search-form-popup">
                <span class="search-head-trigger">Cancel</span>
                <span class="pill-us-mob" style="display: none;"><span class="pico-unified-search local-pill"></span><span
                        class="cross-unified-search"></span></span>
                <input autocomplete="off" id="location-unified-search-pop" class="location-unified-search" placeholder="Practitioner, Practice, Procedure or Suburb"
                    type="text" name="search">
                <input type="hidden" name="keyword" value="">
                <input type="hidden" name="latitude" value="">
                <input type="hidden" name="longitude" value="">
                <input type="hidden" name="counter" value="1">
                <span class="inputcross-unified-search"></span>
                <button type="submit" class="btn mag-unified-search"></button>
            </form>
        </div>
        <div class="input-results-unified-search">
            <div class="inner-fix">
                <div class="results-sect-unified-search sect-type-local">
                    <span class="title-unified-search"><span class="icon-tus"></span><span>Location</span></span>
                    <span class="input-res-unified-search">
                    </span>
                </div>
                <div class="results-sect-unified-search sect-type-practice">
                    <span class="title-unified-search"><span class="icon-tus"></span><span>Practice</span></span>
                    <span class="input-res-unified-search">
                    </span>
                </div>
                <div class="results-sect-unified-search sect-type-practitioner">
                    <span class="title-unified-search"><span class="icon-tus"></span><span>Practitioner</span></span>
                    <span class="input-res-unified-search">
                    </span>
                </div>
                <div class="results-sect-unified-search sect-type-intproc">
                    <span class="title-unified-search"><span class="icon-tus"></span><span>Specialist &amp; Procedure</span></span>
                    <span class="input-res-unified-search">
                    </span>
                </div>
                <div class="results-sect-unified-search sect-type-search">
                    <span class="title-unified-search"><span class="icon-tus"></span><span>Search</span></span>
                    <span class="input-res-unified-search">
                        <div class="unified-search-text-search">Search results for '<span class="unified-search-term"></span>'</div>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <!-- nav start -->
    <nav id="menuMain">
        <div class="slideout-menu-top">
            <ul class="slideout-menu-search">
                <li><a href="#" class="fakebtn-unified-search"><span class="he-ico"></span><span>Search</span></a></li>
            </ul>
            <span class="slideout-menu-header">POPULAR SEARCHES</span>
            <ul class="slideout-menu-list">
                <li class="slideout-menu-gp"><a class="geolink" data-prefix="/appointments/gp/" href="/appointments/gp/"><span
                            class="he-ico"></span><span>Book a GP</span></a></li>
                <li class="slideout-menu-dentist"><a class="geolink" data-prefix="/appointments/dentist/" href="/appointments/dentist/"><span
                            class="he-ico"></span><span>Book a Dentist</span></a></li>
                <li class="slideout-menu-physio"><a class="geolink" data-prefix="/appointments/physiotherapist/" href="/appointments/physiotherapist/"><span
                            class="he-ico"></span><span>Book a Physio</span></a></li>
                <li class="slideout-menu-chiro"><a class="geolink" data-prefix="/appointments/chiropractor/" href="/appointments/chiropractor/"><span
                            class="he-ico"></span><span>Book a Chiro</span></a></li>
            </ul>
            <ul class="slideout-login-list">
                <li class="slideout-login-login"></li>
            </ul>
        </div>
        <span class="slideout-menu-header practice">ARE YOU A PRACTICE?</span>
        <ul class="slideout-menu-list slideout-prac-area">
            <li class="are-prac-btn"><a href="https://practices.healthengine.com.au/?pracsource=header-link-mobile">Solutions
                    for Practices</a>
            <li class="list-prac-btn"><a href="https://practices.healthengine.com.au/?pracsource=header-list-practice-mobile">List
                    your Practice</a>
            <li class="prac-log-area"></li>
            <li class="list-prac-login"><a href="/appointment/admin/"><span class="he-ico"></span><span>Practice Login</span></a></li>
        </ul>
    </nav>
    <!-- nav end -->

    <!-- nav second start -->
    <nav id="menuSecMain">
        <span class="close-button-sec"><span>Close secondary menu</span></span>
        <div class="slideout-menu-top-sec">

        </div>
    </nav>
    <!-- nav second end -->
    <main id="panelMain">
        <!--span class="toggle-button"><span>toggle menu</span></span-->
        <header id="global-header-main" class="clearfix">

            <div class="block-container">
                <span class="toggle-button"><span>Toggle menu</span></span>
                <a href="/" class="he-logo-reverse"></a>
                <nav class="he-header-right">
                    <ul class="he-header-list">
                        <li class="he-menu-links he-header-book">
                            <a href="javascript:;"><span class="he-ico"></span><span>Book a Practitioner</span></a>
                            <ul class="he-menu-list he-header-menu-list">
                                <li class="arr"><span></span></li>
                                <li class="he-header-menu-gp"><a class="geolink" data-prefix="/appointments/gp/" href="/appointments/gp/"><span
                                            class="he-ico"></span><span>Book a GP</span></a></li>
                                <li class="he-header-menu-dentist"><a class="geolink" data-prefix="/appointments/dentist/"
                                        href="/appointments/dentist/"><span class="he-ico"></span><span>Book a Dentist</span></a></li>
                                <li class="he-header-menu-physio"><a class="geolink" data-prefix="/appointments/physiotherapist/"
                                        href="/appointments/physiotherapist/"><span class="he-ico"></span><span>Book a
                                            Physio</span></a></li>
                                <li class="he-header-menu-chiro"><a class="geolink" data-prefix="/appointments/chiropractor/"
                                        href="/appointments/chiropractor/"><span class="he-ico"></span><span>Book a
                                            Chiro</span></a></li>
                                <li class="he-header-menu-hr">
                                    <div></div>
                                </li>
                                <li class="he-header-menu-search"><a href="/findapractitioner.php"><span class="he-ico"></span><span>Search
                                            all services...</span></a></li>
                            </ul>
                        </li>
                        <li class="he-menu-links he-header-signup">
                        </li>
                        <li class="he-menu-links he-header-practice">
                            <a href="https://practices.healthengine.com.au/?pracsource=header-link"><span>Are you a
                                    Practice?</span></a>
                            <ul class="he-header-practice-list closed">
                                <li class="arr"><span></span></li>
                                <li><a href="https://practices.healthengine.com.au/general-practices/?pracsource=header-link-gp">I'm
                                        an GP Provider</a></li>
                                <li><a href="https://practices.healthengine.com.au/practices/dentists/?pracsource=header-link-dentist">I'm
                                        an Dentist Provider</a></li>
                                <li><a href="https://practices.healthengine.com.au/practices/allied-health/?pracsource=header-link-allied">I'm
                                        an Allied Health Provider</a></li>
                                <li><a href="https://practices.healthengine.com.au/practices/specialists/?pracsource=header-link-specialist">I'm
                                        an Specialist Provider</a></li>
                            </ul>
                        </li>
                    </ul>
                </nav>
                <div class="fakebtn-unified-search search-icon-header"></div>
            </div>
        </header>
        <div id="retry_save_modal" class="session-retry-dialog state-hide" style="display: none;">
            <div class="dialog-header">Session Expired</div>
            <p>Your session has expired, or you have been logged out.</p>
            <div class="dialog-buttons">
                <button class="retry-session-button">Login</button>
                <button>Cancel</button>
            </div>
        </div>

        <div class="container">
            <div id="badBrowser" class="row full-width he-yellow-bg he-sunkissed " style="display:none;">
                <div class="span12">
                    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://outdatedbrowser.com/en"
                            target="_blank">upgrade your browser</a> to improve your experience.</p>
                </div>
            </div>
            <script type="application/ld+json">
                {
                    "@context": "http://schema.org/",
                    "@type": "Person",
                    "name": "Dr Jinnan Cai",
                    "image": "https://healthengine.imgix.net/photos/doctors/doc51858-20150629010012.jpg?auto=compress&ixlib=php-2.1.0&or=0",
                    "gender": "Male",
                    "address": {
                        "@type": "PostalAddress",
                        "addressLocality": "Yokine",
                        "addressRegion": "WA",
                        "postalCode": "6060",
                        "streetAddress": "Suite 4 / 162 Wanneroo Road"
                    }
                }
            </script>
            <div class="practitioner-profile-header profile-header-wrapper banner-image">
                <div class="profile-header-banner default-image-acupuncture" style="background-image: url('https://healthengine.imgix.net/photos/grp_loc/grp-banner-33357-20150629005311.jpg?auto=compress&h=170&ixlib=php-2.1.0&or=0')"></div>
                <div class="header-alpha"></div>
                <div class="profile-header practitioner-profile-header">
                    <div class="practitioner-image" style="background-image: url('https://healthengine.imgix.net/photos/doctors/doc51858-20150629010012.jpg?auto=compress&h=100&ixlib=php-2.1.0&or=0&w=100');"></div>
                    <div class="profile-header-content practitioner-content">
                        <h1 class="practitioner-name" itemprop="name">Dr Jinnan Cai</h1>
                        <div class="practitioner-fav fav-side-outer fav-top"><span class="favourite nounderline favourite-explicit"
                                data-id="51858" data-type="practitioner"></span></div>
                        <div class="header-banner-left practitioner-banner-left">
                            <div class="practitioner-info">
                                <p class="practitioner-info-text">
                                    <span>Male Practitioner</span>
                                </p>
                                <p class="practitioner-addie">Suite 4 / 162 Wanneroo Road Yokine, WA 6060</p>
                            </div>
                        </div>

                        <div class="header-banner-right">
                            <div class="view-map">
                                <span id="view-map-link" data-coords="-31.8960011,115.841178"> View on map</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mobile-header-details">
                <div class="practice-address">
                    <span class="practice-address-text">
                        Suite 4 / 162 Wanneroo Road, Yokine, WA 6060 </span>
                </div>
            </div>

            <div id="mobile-apptBtn-bottom"></div>

            <div id="main" class="row" data-doctor-presenter="51858" data-profile-type="practitioner">

                <div class="content-wrapper">
                    <div id="body">
                        <div id="practice-description" class="clearfix" itemprop="description">
                            <div class="description-content practitioner-description">
                                <h2>Overview</h2>
                                <div class="description-content">
                                    <p>As managing director, Jinnan works closely together with Ping to lead, support
                                        and inspire our&nbsp;team to do the best work of our lives. Jinnan brings his
                                        extensive experience in health informatics and innovation to Ping Ming Health
                                        and is responsible for the development of our&nbsp;quality management and
                                        evidence-based medicine&nbsp;programmes. He is passionate about the potential
                                        of traditional Chinese medicine to provide effective and natural health care
                                        that complements both western medicine and our modern lifestyles.</p>
                                    <p>Jinnan holds a double degree in Chinese medicine and human biology with first
                                        class honours from RMIT University, Melbourne. He graduated with a perfect GPA
                                        of 4.0 and has clinical experience from Ping Ming Health and the Jiangsu
                                        Provincial Hospital of TCM in China&nbsp;(a major&nbsp;tertiary hospital which
                                        treats over 4 million patients per year). With compassion and attention to
                                        detail, Jinnan is experienced in helping with&nbsp;a wide range of health
                                        problems including body pain, women&rsquo;s and men&rsquo;s
                                        health,&nbsp;symptoms of chronic stress such as anxiety, depression, fatigue,
                                        headache, insomnia and digestive complaints. He&nbsp;also has a special
                                        interest in the management of chronic postoperative pain and recovery from
                                        surgery with acupuncture and Chinese herbal medicine.&nbsp;He is a member of
                                        AACMA and the Australian Institute of Company Directors (AICD).</p>
                                </div>
                                <a href="javascript:;" class="more-area-btn">Read more</a>
                                <p>Dr Jinnan Cai is a male Acupuncturist and Chinese Medicine Practitioner in Yokine,
                                    WA.</p>
                            </div>
                            <div class="practitioner-interest">
                                <h3>Areas of interest</h3>
                                <ul>
                                    <li><a href="/interest/Acupuncture/WA/">Acupuncture</a></li>
                                    <li><a href="/interest/Anxiety/WA/">Anxiety</a></li>
                                    <li><a href="/interest/Chronic-Disorders/WA/">Chronic Disorders</a></li>
                                    <li><a href="/interest/Depression/WA/">Depression</a></li>
                                    <li><a href="/interest/Digestive-Conditions/WA/">Digestive Conditions</a></li>
                                    <li><a href="/interest/Fatigue/WA/">Fatigue</a></li>
                                    <li><a href="/interest/Headaches/WA/">Headaches</a></li>
                                    <li><a href="/interest/Insomnia/WA/">Insomnia</a></li>
                                    <li><a href="/interest/Men%27s-Health/WA/">Men's Health</a></li>
                                    <li><a href="/interest/Pain/WA/">Pain</a></li>
                                    <li><a href="/interest/Stress-Management/WA/">Stress Management</a></li>
                                    <li><a href="/interest/Women%27s-Health/WA/">Women's Health</a></li>
                                </ul>
                            </div>
                        </div>

                        <div id="qualifications-experience" class="clearfix" itemprop="qualifications">
                            <h2>Qualifications and Experience</h2>
                            <div class="qualifications-experience-contain">
                                <div class="affliations one-half">
                                    <h3>Affliations</h3>
                                    <ul>
                                        <li>Australian Acupuncture and Chinese Medicine Association</li>
                                        <li>Australian Institute of Company Directors</li>
                                    </ul>
                                </div>
                                <div class="languages one-half">
                                    <h3>Languages spoken</h3>
                                    <ul>
                                        <li>English</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <a id="practice-contact-anchor" name="practice-contact-anchor"></a>
                        <div id="contact-info" class="practice-information clearfix">
                            <h2 class="profile-gallery-title">Practice Information</h2>

                            <div class="practice-information-contain">
                                <div class="practice-location-contain one-whole">
                                    <span class="practice-location-label">Practice: </span>
                                    <div class="practice-location-switch bk-sel-arr">
                                        <select id="practice-location-switch">
                                            <option value="/chinese-medicine-practitioner/wa/yokine/dr-jinnan-cai/p51858?location=33357&src=doctor"
                                                selected>Ping Ming Health Yokine (Yokine)</option>
                                            <option value="/chinese-medicine-practitioner/wa/yokine/dr-jinnan-cai/p51858?location=60143&src=doctor">Ping
                                                Ming Health Midland (Midland)</option>
                                            <option value="/chinese-medicine-practitioner/wa/yokine/dr-jinnan-cai/p51858?location=64765&src=doctor">QV
                                                Medical - Elizabeth St (Melbourne)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="basic-details one-third">
                                    <h3>Contact details</h3>
                                    <ul class="phone-container-practice">
                                        <li class="practice-name">
                                            <a href="/chinese-medicine-practitioner/wa/yokine/ping-ming-health-yokine/s33357?src=doctor"
                                                itemprop="name">Ping Ming Health Yokine</a>
                                        </li>
                                        <li class="address"><span>
                                                Suite 4 / 162 Wanneroo Road<br>
                                                Yokine, WA 6060 </span></li>

                                        <li class="phone phone-container" data-id="51858">
                                            <span class="track-practitioner-num-wrap-noappt" data-tel="(08)&nbsp;9345&nbsp;2668">
                                                (08)&nbsp;9345&nbsp;2... </span>
                                        </li>


                                    </ul>
                                </div>
                                <div class="opening-hours one-third">
                                    <h3>Opening hours</h3>
                                    <dl>
                                        <dt>Monday:</dt>
                                        <dd>09:00am - 06:00pm</dd>
                                        <dt>Tuesday:</dt>
                                        <dd>09:00am - 06:00pm</dd>
                                        <dt>Wednesday:</dt>
                                        <dd>09:00am - 06:00pm</dd>
                                        <dt>Thursday:</dt>
                                        <dd>09:00am - 06:00pm</dd>
                                        <dt><strong style="font-weight:bold;">Friday</strong>:</dt>
                                        <dd><strong style="font-weight:bold;">09:00am - 06:00pm</strong></dd>
                                        <dt>Saturday:</dt>
                                        <dd>09:00am - 06:00pm</dd>
                                        <dt>Sunday:</dt>
                                        <dd>09:00am - 06:00pm</dd>
                                        <dt>Public Holidays:</dt>
                                        <dd>09:00am - 06:00pm</dd>
                                        <div></div>
                                    </dl>
                                </div>


                                <div class="social-media one-third">
                                    <h3>Social media</h3>
                                    <a href="https://www.facebook.com/PingMingHealth" class="fb" target="_blank"></a>
                                    <a href="https://twitter.com/pingminghealth" class="tw" target="_blank"></a>
                                </div>



                            </div>

                        </div>
                        <div class="practice-map-contain practitioner-map clearfix">
                            <h3>Find Ping Ming Health Yokine</h3>
                            <span class="close-icon"></span>
                            <div id="dynamic_google_map">
                                <a class="map-links" href="/new/map.php?lat=-31.8960011&amp;long=115.8411780" title="Suite 4 / 162 Wanneroo Road, Yokine, WA 6060">
                                    <img class="static_google_map" alt="Show map of Suite 4 / 162 Wanneroo Road, Yokine, WA 6060">
                                </a>
                            </div>
                            <script type="text/javascript">
                                $(function () {
                                    var imgsrc = null;

                                    function initMap() {
                                        $('#dynamic_google_map').each(function () {
                                            var $this = $(this);
                                            $this.height(350);
                                        });
                                        var size = $('#dynamic_google_map').width() + 'x' + $(
                                            '#dynamic_google_map').height();
                                        imgsrc =
                                            "//maps.googleapis.com/maps/api/staticmap?center=-31.8960011,115.8411780&markers=icon:http://healthengine.com.au/images/map-marker-larger.png|-31.8960011,115.8411780&zoom=15&size=" +
                                            size +
                                            "&sensor=false&visual_refresh=true&key=AIzaSyB0I7hCmp6_hwCSETppt910-eHXKsJ9EVo";
                                    }

                                    // lazy load map (only set src when scrolled into view)
                                    $(window).scroll(function () {
                                        var docViewTop = $(window).scrollTop();
                                        var docViewBottom = docViewTop + $(window).height();
                                        $('.static_google_map').each(function () {
                                            var elemTop = $(this).offset().top;
                                            if (docViewBottom > elemTop) {
                                                $(this).attr('src', imgsrc);
                                            }
                                        });
                                    });

                                    window.onresize = initMap;
                                    initMap();

                                    $("a.map-links").fancybox({
                                        helpers: {
                                            overlay: {
                                                locked: false
                                            }
                                        },
                                        'autoDimensions': true,
                                        'centerOnScroll': true,
                                        'overlayShow': true,
                                        'type': 'ajax'
                                    });
                                });
                            </script>
                        </div>

                        <div class="hide">
                            <script src="//d2g92a8pyizotc.cloudfront.net/js/bootstrap-datepicker.js?v=20190214073553"></script>
                            <div id="appointment_lightbox" class="prac-appt-lightbox picker">
                                <div class="close">close</div>
                                <div id="mobile-fixed-top-bar" class="hide">
                                    <select id="appt_location_select_mobile">
                                        <option value="33357">Yokine - Ping Ming Health Yokine</option>
                                        <option value="64765">Melbourne - QV Medical - Elizabeth St</option>
                                        <option value="60143">Midland - Ping Ming Health Midland</option>
                                    </select>
                                    <select id="appt_specialty_select_mobile">
                                    </select>
                                    <a href="#"><span class="visual-hide">select date</span><span class="date-select fontastic-calendar-1"></span></a>
                                </div>

                                <div class="picker-controls">
                                    <div class="picker-controls-mobile-close fontastic-x"></div>
                                    <div class="picker-controls-title">
                                        <h2>Online booking</h2>
                                    </div>
                                    <div class="picker-controls-filters">
                                        <div class="filter-calendar-button hide">
                                            <h3>Show a specific date:</h3>
                                            <button><span class="fontastic-calendar-1"> <span class="date-button">2nd
                                                        September 2014</span></button>
                                        </div>
                                        <div class="filter-calendar">
                                            <!-- <h3>Show this day:</h3> -->
                                            <div class="datewidget"></div>
                                        </div>

                                        <div class="filter-specialty">
                                            <h3>Show this specialty:</h3>
                                            <select id="appt_specialty_select">
                                            </select>
                                        </div>
                                        <input type="hidden" id="appt_specialty_select" value="">

                                        <div class="filter-location">
                                            <h3>Show appointments at:</h3>
                                            <div class="filter-location-group">
                                                <h4>Select a location:</h4>
                                                <div class="location-wrapper">
                                                    <div class="filter-location-profile" data-location="33357">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="picker-controls-show-appointments-bar hide">
                                        <div class="picker-controls-show-appointments-button">Show Appointments</div>
                                    </div>
                                </div>


                                <div class="filter-results-bar">

                                    <div class="filter-results-inner">
                                        <div class="filter-option" id="filter-option-specialty">
                                            <div class="filter-label">Show times for</div>

                                            <div class="filter-select-wrap" data-relselect="appt_specialty_select">
                                                <div class="selected-filter-option">
                                                </div>
                                                <ul class="filter-select-options">
                                                </ul>
                                            </div>

                                            <div class="filter-specialty">
                                                <select id="appt_specialty_select">

                                                </select>
                                            </div>
                                        </div>

                                        <div class="filter-option" id="filter-option-location">
                                            <div class="filter-label">Show appointments at</div>
                                            <div class="filter-select-wrap" data-relselect="appt_location_select_mobile">
                                                <div class="selected-filter-option">
                                                    Midland - Ping Ming Health Yokine </div>
                                                <ul class="filter-select-options filter-select-location">
                                                    <li data-val="33357">
                                                        <div class="filter-location-name filter-location-profile">Yokine
                                                            - Ping Ming Health Yokine</div>
                                                    </li>
                                                    <li data-val="64765">
                                                        <div class="filter-location-name filter-location-profile">Melbourne
                                                            - QV Medical - Elizabeth St</div>
                                                    </li>
                                                    <li data-val="60143">
                                                        <div class="filter-location-name filter-location-profile">Midland
                                                            - Ping Ming Health Midland</div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="filter-location-select-overlay hide">
                                            <div class="group-wrapper">
                                                <h3>Choose a Location <span class="location-select-close fontastic-x"></span></h3>
                                                <div data-location="33357" class="filter-location-profile">
                                                    <h5>Ping Ming Health Yokine</h5>
                                                    <a href="#">Yokine, 6060, WA</a>
                                                    <span class="fontastic-chevron-right"></span>
                                                </div>
                                                <div data-location="64765" class="filter-location-profile">
                                                    <h5>QV Medical - Elizabeth St</h5>
                                                    <a href="#">Melbourne, 3000, VIC</a>
                                                    <span class="fontastic-chevron-right"></span>
                                                </div>
                                                <div data-location="60143" class="filter-location-profile">
                                                    <h5>Ping Ming Health Midland</h5>
                                                    <a href="#">Midland, 6056, WA</a>
                                                    <span class="fontastic-chevron-right"></span>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="picker-results"></div>
                                <div class="scroll-overlay bottom"><span class="icon-white icon-chevron-down"></span>
                                    More Appointments <span class="icon-white icon-chevron-down"></span></div>
                            </div>

                            <script type="text/javascript">
                                function fancyboxApptShow() {
                                    var height = $('.row-fluid.appt-box').height();
                                    var scrollHeight = $('.row-fluid.appt-box').prop('scrollHeight');
                                    if (scrollHeight > height) {
                                        $('.row-fluid.appt-box-show-more').show();
                                    } else {
                                        $('.row-fluid.appt-box-show-more').hide();
                                    }
                                }

                                $(function () {

                                    var mobileMode = false;

                                    var escapeHTML = (function () {
                                        var chr = {
                                            '"': '&quot;',
                                            '&': '&amp;',
                                            '<': '&lt;',
                                            '>': '&gt;'
                                        };
                                        return function (text) {
                                            return text.replace(/[\"&<>]/g, function (a) {
                                                return chr[a];
                                            });
                                        };
                                    }());

                                    // function wrapper for data...
                                    var doctor_data = {
                                        "stats": {
                                            "total": 0
                                        },
                                        "practices": []
                                    };

                                    // Detect windows to resolve scrollbar overlap
                                    var isWin = navigator.platform.toUpperCase().indexOf('WIN') >= 0;
                                    if (isWin) {
                                        $('#appointment_lightbox .filter-results-bar').addClass(
                                            'windows-overlap');
                                    }

                                    var specialty_locations = [];

                                    var appt_url = (function () {
                                        return $(document.body).hasClass('he-webplugin') ? function (
                                            loc, specialty, doctor, date, time) {
                                            var timestr = ('0' + Math.floor(time / 3600)).slice(-2) +
                                                '' + ('0' + Math.floor((time % 3600) / 60)).slice(-
                                                    2);
                                            return 'https://healthengine.com.au/appointment/book_widget/' +
                                                loc + '/' + specialty + '/' + date + 'T' + timestr +
                                                '/?practitioner=' + doctor +
                                                '&amp;source=practitioner-lightbox';
                                        } : function (loc, specialty, doctor, date, time) {
                                            var timestr = ('0' + Math.floor(time / 3600)).slice(-2) +
                                                '' + ('0' + Math.floor((time % 3600) / 60)).slice(-
                                                    2);
                                            return 'https://healthengine.com.au/appointment/book/' +
                                                loc + '/' + specialty + '/' + date + 'T' + timestr +
                                                '/?practitioner=' + doctor +
                                                '&amp;source=practitioner-lightbox';
                                        };
                                    })();

                                    var humantime = function (time) {
                                        var am = true;
                                        var hours = Math.floor(time / 3600);
                                        if (hours >= 12) {
                                            am = false;
                                            if (hours > 12) hours -= 12;
                                        }
                                        var mins = Math.floor((time % 3600) / 60);
                                        return hours + ':' + (mins < 9 ? '0' : '') + mins + (am ? "am" :
                                            "pm");
                                    }

                                    var dateformat = function (d) {
                                        //var d = new Date(date);
                                        return [
                                            ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][d.getUTCDay()],
                                            d.getUTCDate(),
                                            ["January", "February", "March", "April", "May", "June",
                                                "July", "August", "September", "October", "November",
                                                "December"
                                            ][d.getUTCMonth()]
                                        ];
                                    }

                                    // calendar widget
                                    var startDate = new Date();
                                    startDate.setHours(0);
                                    startDate = new Date(Date.UTC(startDate.getFullYear(), startDate.getMonth(),
                                        startDate.getDate(), 0, 0, 0, 0));
                                    var endDate = new Date();


                                    var firstApptDate = new Date();
                                    firstApptDate = new Date(Date.UTC(firstApptDate.getFullYear(),
                                        firstApptDate.getMonth(), firstApptDate.getDate(), 0, 0, 0, 0));

                                    var loadedMonth = new Date(2019, 3 - 1, 1, 0, 0, 0, 0);
                                    loadedMonth = new Date(Date.UTC(loadedMonth.getFullYear(), loadedMonth.getMonth(),
                                        1, 0, 0, 0, 0));

                                    var queueProcess = false;

                                    var blockForm = false;
                                    var blockData = {};

                                    $('.datewidget').datepicker({
                                        startDate: startDate,
                                        endDate: endDate,
                                        todayBtn: 'linked',
                                        maxViewMode: 0,
                                        extraDateClass: function (dt) {
                                            var dtstring = dt.getUTCFullYear() + '-' + (dt.getUTCMonth() <
                                                    9 ? '0' : '') + (dt.getUTCMonth() + 1) + '-' +
                                                (dt.getUTCDate() < 10 ? '0' : '') + (dt.getUTCDate());
                                            var ret = false;
                                            if (current_location &&
                                                current_location in doctor_data.practices &&
                                                current_specialty in doctor_data.practices[
                                                    current_location].appts) {
                                                $.each(doctor_data.practices[current_location].appts[
                                                    current_specialty].doctors, function (
                                                    idx, dates) {
                                                    if (dtstring in dates.dates) {
                                                        ret = true;
                                                        return false;
                                                    }
                                                })
                                            }
                                            return ret ? '' : 'no-bookings';
                                        }
                                    }).on('changeDate', function (e) {
                                        var dt = e.date;
                                        $('.filter-calendar-button button span.date-button').html($(
                                            '.datewidget').datepicker('getFormattedDate',
                                            'd MM yyyy'));
                                        $(document).trigger('click.hide_calendar');
                                        if (blockForm) {
                                            blockData.date = dt;
                                            return;
                                        }

                                        //console.log("Change Date", e.date.getUTCDate(), e.date.getUTCMonth(), e.date.getUTCFullYear());
                                        $('#appointment_lightbox').trigger('scroll-to-date', [dt]);

                                    }).on('changeMonth', function (e) {

                                        //console.log("Change Month", e.date.getUTCMonth(), e.date.getUTCFullYear());

                                        var newmonth = e.date;

                                        if (e.navMode == 'arrows') {
                                            var firstofmonth = new Date(newmonth.getTime());
                                            firstofmonth.setUTCDate(1);
                                            if (firstofmonth <= startDate) {
                                                firstofmonth = new Date(startDate.getTime());
                                                firstofmonth.setUTCDate(firstofmonth.getUTCDate() + 1);
                                            }
                                            if (firstofmonth < endDate) {
                                                if (blockForm) {
                                                    blockData.date = firstofmonth;
                                                } else {
                                                    setCalendarDate(firstofmonth);
                                                    $('#appointment_lightbox').trigger('scroll-to-date',
                                                        [firstofmonth, true]);
                                                }
                                            }
                                        }

                                        // if month later than last loaded month... load more month data...
                                        if (newmonth >= loadedMonth && newmonth <= endDate) {
                                            loadedMonth = new Date(newmonth.getTime());
                                            loadedMonth.setUTCDate(1);
                                            loadedMonth.setUTCMonth(loadedMonth.getUTCMonth() + 1);
                                            var argMonth = new Date(loadedMonth.getTime());
                                            // load new appointments...
                                            var queuesize = $(document).queue("loadMonthData").length;
                                            $(document).queue("loadMonthData", function (next) {
                                                queueProcess = true;
                                                $.getJSON(
                                                    '/public/practitioner/appointments_json.php', {
                                                        'doctor': 51858,
                                                        'month': argMonth.getUTCMonth() + 1,
                                                        'year': argMonth.getUTCFullYear(),
                                                        'widget': $(document.body).hasClass(
                                                            'he-webplugin') ? 1 : 0
                                                    }).done(function (data) {
                                                    $(document).trigger('loaded-data',
                                                        [0, true, argMonth]);
                                                    queueProcess = false;
                                                    next();
                                                });
                                            });
                                            if (!queueProcess) $(document).dequeue("loadMonthData",
                                                loadedMonth);
                                        }
                                    });

                                    // build appointments div...
                                    function buildAppointments(start, finish, append) {
                                        if (!current_specialty) {
                                            current_specialty = $('#appt_specialty_select').val() ||
                                                'General Practice';
                                        }

                                        var td = new Date();
                                        td = new Date(Date.UTC(td.getFullYear(), td.getMonth(), td.getDate(), 0,
                                            0, 0, 0));

                                        var today = td.getTime();
                                        var tomorrow = today + (24 * 3600 * 1000);

                                        var dt = start || td;

                                        if (dt > endDate) return; // no op...

                                        var maxdate = finish || new Date(loadedMonth.getTime());
                                        maxdate.setUTCMonth(maxdate.getUTCMonth() + 1);

                                        var resdiv = $('<div class="picker-results"></div>');
                                        var appointment_index = 0;

                                        var first_empty_header = null;
                                        var first_empty_date = null;
                                        do {
                                            var dtstring = dt.getUTCFullYear() + '-' + (dt.getUTCMonth() < 9 ?
                                                '0' : '') + (dt.getUTCMonth() + 1) + '-' + (dt.getUTCDate() <
                                                10 ? '0' : '') + (dt.getUTCDate());
                                            // create date...
                                            var datetitle = "";
                                            if (dt.getTime() == today) datetitle = 'Today';
                                            if (dt.getTime() == tomorrow) datetitle = 'Tomorrow';
                                            var datediv = $(
                                                '<div class="picker-results-day clearfix" id="picker-date-' +
                                                dtstring + '"></div>');
                                            var dateparts = dateformat(dt);
                                            if (datetitle == 'Today' || datetitle == 'Tomorrow') {
                                                var dateheader = $(
                                                    '<div class="picker-results-date"><h3><span class="date-dow">' +
                                                    datetitle + '</span></h3></div>');
                                            } else {
                                                dateheader = $(
                                                    '<div class="picker-results-date"><h3><span class="date-dow">' +
                                                    dateparts[0] + '</span> <span class="date-day">' +
                                                    dateparts[1] + '</span> <span class="date-mth">' +
                                                    dateparts[2] + '</span>' + (datetitle ?
                                                        ' <span class="date-title">' + datetitle +
                                                        '</span>' : '') + '</h3></div>');
                                            }
                                            dateheader.appendTo(datediv);
                                            var apptdiv = $('<div class="picker-results-segments"></div>');
                                            var apptsegmentmorning = $(
                                                '<div class="picker-results-segment day-morning"><span class="segment-icon">K</span></div>'
                                            );
                                            var apptsegmentafternoon = $(
                                                '<div class="picker-results-segment day-afternoon"><span class="segment-icon">I</span></div>'
                                            );
                                            var apptsegmentevening = $(
                                                '<div class="picker-results-segment day-evening"><span class="segment-icon">J</span></div>'
                                            );

                                            var apptCounter = 0;
                                            $.each(doctor_data.practices, function (loc) {
                                                loc = parseInt(loc);
                                                if (current_location != 0 && current_location != loc)
                                                    return true;
                                                if (!(current_specialty in doctor_data.practices[loc].appts))
                                                    return true;
                                                $.each(doctor_data.practices[loc].appts[
                                                    current_specialty].doctors, function (docid,
                                                    dates) {
                                                    if (!(dtstring in dates.dates)) return true;
                                                    $.each(dates.dates[dtstring], function (idx,
                                                        appt) {

                                                        if (appointment_index == 0) {
                                                            var datediv_next = $(
                                                                '<div class="picker-results-day clearfix" id="picker-date-next-avail"></div>'
                                                            );
                                                            var dateheader_next = $(
                                                                '<div class="picker-results-date"><h3><span class="date-dow">Next available</span></h3></div>'
                                                            );
                                                            dateheader_next.appendTo(
                                                                datediv_next);
                                                            var apptdiv_next = $(
                                                                '<div class="picker-results-segments"></div>'
                                                            );
                                                            var datestring = (datetitle ==
                                                                    'Today' ||
                                                                    datetitle ==
                                                                    'Tomorrow') ?
                                                                datetitle : (dateparts[
                                                                        1] + ' ' +
                                                                    dateparts[2]);
                                                            apptdiv_next.append(
                                                                '<div class="picker-results-segment"><a style="width: 160px;" href="' +
                                                                appt_url(loc,
                                                                    current_specialty,
                                                                    docid, dtstring,
                                                                    appt.time) +
                                                                '" class="apptTimeBtn">' +
                                                                datestring + ' ' +
                                                                humantime(appt.time) +
                                                                '</a></div>')

                                                            apptdiv_next.appendTo(
                                                                datediv_next);
                                                            resdiv.prepend(datediv_next);
                                                            appointment_index++;
                                                        }


                                                        var apptli =
                                                            '<a class="apptTimeBtn" href="' +
                                                            appt_url(loc,
                                                                current_specialty,
                                                                docid, dtstring, appt.time
                                                            ) + '">' + humantime(appt.time) +
                                                            '</a>';
                                                        if (appt.time < 43200) { // 12pm
                                                            apptCounter++;
                                                            apptsegmentmorning.append(
                                                                apptli);
                                                        } else if (appt.time < 64800) { // 6pm
                                                            apptCounter++;
                                                            apptsegmentafternoon.append(
                                                                apptli);
                                                        } else {
                                                            apptCounter++;
                                                            apptsegmentevening.append(
                                                                apptli);
                                                        }
                                                    });
                                                    first_empty_header = null;
                                                    first_empty_date = null;
                                                });
                                                if (apptCounter == 0) {
                                                    if (first_empty_header == null) {
                                                        // first empty header, just record it
                                                        datediv.addClass('no-appts').append(
                                                            '<p>There are no appointments available online for the selected practitioner on this day.</p>'
                                                        );
                                                        first_empty_header = datediv;
                                                    } else {
                                                        datediv.addClass('no-appts').append(
                                                            '<p>There are no appointments available online for the selected practitioner on these days.</p>'
                                                        );
                                                        // lets remove the last header, merge their date with ours
                                                        if (first_empty_date == null) {
                                                            first_empty_date = first_empty_header.find(
                                                                'h3').contents();
                                                        }

                                                        first_empty_header.remove();
                                                        first_empty_header = datediv;
                                                        datediv.find('h3').prepend(
                                                            '<span class="date-spacer"> - </span>');
                                                        datediv.find('h3').prepend(first_empty_date);
                                                    }
                                                }
                                            });

                                            if (apptsegmentmorning.find('a').length > 0) apptsegmentmorning.appendTo(
                                                apptdiv);
                                            if (apptsegmentafternoon.find('a').length > 0) apptsegmentafternoon
                                                .appendTo(apptdiv);
                                            if (apptsegmentevening.find('a').length > 0) apptsegmentevening.appendTo(
                                                apptdiv);
                                            apptdiv.appendTo(datediv);
                                            resdiv.append(datediv);
                                        } while (dt.setUTCDate(dt.getUTCDate() + 1) && dt < endDate && dt <
                                            maxdate);
                                        if (append) {
                                            $('.picker-results').append(resdiv.html());
                                        } else {
                                            $('.picker-results').replaceWith(resdiv);
                                        }
                                    }

                                    var current_specialty, current_location = 0;

                                    // reload appointments being displayed...
                                    $(document).on('change-location change-specialty loaded-data', function (e,
                                        arg, append, month) {
                                        var current_date = getCalendarDate();
                                        prevent_scroll_callbacks = true;
                                        current_specialty = $('#appt_specialty_select').val();
                                        current_location = $(
                                            '.location-wrapper .filter-location-profile').data(
                                            'location') || 0;

                                        $('.picker-results .fixed-header, .scroll-overlay.bottom').width(
                                            $('.picker-results .picker-results-day:first').width());
                                        if ($('.picker-results').prop('scrollHeight') -
                                            FIXED_TOP_HEIGHT > $('.picker-results').height() + $(
                                                '.picker-results').scrollTop() + 50) {
                                            $('.scroll-overlay.bottom').clearQueue().animate({
                                                'bottom': 0
                                            });
                                        } else {
                                            $('.scroll-overlay.bottom').clearQueue().animate({
                                                'bottom': -50
                                            });
                                        }

                                        if (current_specialty != $('.picker-results').data('specialty') ||
                                            current_location != $('.picker-results').data('location') ||
                                            append) {
                                            if (!append) $('.picker-results').empty();
                                            //console.log("running", current_specialty, current_location, append?"append":"no-append");
                                            $('.picker-results').data('specialty', current_specialty).data(
                                                'location', current_location);
                                            buildAppointments(month ? new Date(month.getTime()) : null,
                                                month ? new Date(month.getTime()) : null, append);
                                            $('#appointment_lightbox').trigger('scroll-to-date', [
                                                append ? getCalendarDate() : current_date, true
                                            ]);
                                            prevent_scroll_callbacks = false;
                                            $('.picker-results').trigger('scroll', [true]);
                                            $('.datewidget').datepicker('fill');

                                            $('.picker-results .fixed-header, .scroll-overlay.bottom').width(
                                                $('.picker-results .picker-results-day:first').width()
                                            );
                                            if ($('.picker-results').prop('scrollHeight') > $(
                                                    '.picker-results').height() + $('.picker-results').scrollTop() +
                                                50) {
                                                $('.scroll-overlay.bottom').clearQueue().animate({
                                                    'height': 32,
                                                    'padding': 5
                                                });
                                            } else {
                                                $('.scroll-overlay.bottom').clearQueue().animate({
                                                    'height': 0,
                                                    'padding': 0
                                                });
                                            }
                                        }
                                    });

                                    $(document).on('change-specialty', function (e, selval) {
                                        if (selval in specialty_locations) {

                                            var currentval = $('#appt_location_select_mobile').val();
                                            var totalLocations = specialty_locations[selval].length - 1 +
                                                ' available';
                                            $('#appt_location_select_mobile').empty().prop(
                                                'selectedIndex', 0);
                                            $('#filter-option-location li').removeClass(
                                                "selection-show");
                                            $.each(specialty_locations[selval], function (idx, elem) {
                                                $('<option></option>').attr('value', elem.value)
                                                    .html(elem.label).appendTo(
                                                        '#appt_location_select_mobile');
                                                if (elem.value == currentval) {
                                                    $('#appt_location_select_mobile').val(
                                                        currentval);
                                                }
                                                $('#filter-option-location li[data-val="' +
                                                    elem.value + '"]').addClass(
                                                    "selection-show");
                                            });

                                            // run prac change event
                                            $('#appt_location_select_mobile').change();

                                        } else {
                                            $('#appt_location_select_mobile').empty().prop(
                                                'selectedIndex', 0).change();
                                        }

                                        if (selval && selval.length > 0) {
                                            // Update custom specialty box - applies to both Specialty AND procedure
                                            $('#filter-option-specialty .selected-filter-option').html(
                                                $('#filter-option-specialty li[data-val="' + selval +
                                                    '"]').html());
                                            $('#filter-option-specialty li').removeClass('selected');
                                            $('#filter-option-specialty li[data-val="' + selval + '"]')
                                                .addClass('selected');
                                        };
                                    });

                                    $(document).on('change-location', function (e, arg) {
                                        current_location = $(
                                            '.location-wrapper .filter-location-profile').data(
                                            'location') || 0;
                                        $('#appt_location_select_mobile').val(current_location);

                                        //console.log(current_location);

                                        // Update custom select box
                                        if (!current_location == 0) {
                                            $('#filter-option-location .selected-filter-option').html($(
                                                '#filter-option-location li[data-val="' +
                                                current_location +
                                                '"] > .filter-location-profile').clone());
                                            $('#filter-option-location li').removeClass('selected');
                                            $('#filter-option-location li[data-val="' +
                                                current_location + '"]').addClass('selected');
                                        }
                                    });

                                    // click on date and scroll to it...
                                    var prevent_scroll_callbacks = false;

                                    // global function to get currently selected date
                                    function getCalendarDate() {
                                        return $('.datewidget').datepicker('getUTCDate');
                                    }

                                    // global function to set currently selected date
                                    function setCalendarDate(newdt) {
                                        if (!(newdt instanceof Date)) {
                                            newdt = newdt + '';
                                            var match = newdt.match(
                                                /([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])/);
                                            if (match) {
                                                newdt = new Date(Date.UTC.apply(Date, [parseInt(match[1], 10),
                                                    parseInt(match[2], 10) - 1, parseInt(match[3],
                                                        10)
                                                ]));
                                            } else {
                                                return;
                                            }
                                        }
                                        var current = $('.datewidget').datepicker('getUTCDate');
                                        if (newdt && newdt.getTime && (!current || newdt.getTime() !== current.getTime())) {
                                            $('.datewidget').datepicker('gotoDate', newdt);
                                            if (newdt.getUTCMonth() != current.getUTCMonth() || newdt.getUTCFullYear() !=
                                                current.getUTCFullYear()) {
                                                $('.datewidget').trigger({
                                                    type: 'changeMonth',
                                                    date: new Date(newdt.getTime()),
                                                    navMode: 'scroll'
                                                });
                                            }
                                        }
                                    }

                                    $('#appt_specialty_select_mobile').change(function () {
                                        $('#appt_specialty_select').val($(this).val()).change();
                                    });

                                    $('#appt_location_select_mobile').change(function () {
                                        var location_id = $(this).val();
                                        $('.group-wrapper .filter-location-profile').each(function (idx,
                                            elem) {
                                            if ($(this).data('location') == location_id) {
                                                $('.filter-location-profile').removeClass(
                                                    'profile-selected');
                                                $(this).addClass('profile-selected');
                                                $('.location-wrapper').html($(this).clone());
                                            } else if ($(this).hasClass('profile-selected')) {
                                                $(this).removeClass('profile-selected');
                                            }
                                        });
                                        $(document).trigger('change-location', [location_id]);
                                    });

                                    // trigger document event on change specialty.
                                    $('#appt_specialty_select').change(function () {
                                        if (blockForm) {
                                            blockData.specialty = $(this).val();
                                            current_specialty = $(this).val();
                                            $('.datewidget').datepicker('fill');
                                            return;
                                        }
                                        $(document).trigger('change-specialty', [$(this).val()]);
                                    }).change();

                                    $('.filter-location-select-overlay').on('close', function () {
                                        $('#appointment_lightbox').off('click.close_overlay');
                                        if ($('.filter-location-select-overlay:visible').length) {
                                            $('.filter-location-select-overlay')
                                                .css({
                                                    'overflow-y': 'hidden'
                                                });
                                            $('.filter-location-select-overlay .group-wrapper')
                                                .clearQueue()
                                                .animate({
                                                        'margin-left': -$(
                                                            '.filter-location-select-overlay .group-wrapper'
                                                        ).outerWidth()
                                                    },
                                                    200,
                                                    function () {
                                                        $('.filter-location-select-overlay').css({
                                                            'top': '',
                                                            'overflow-y': '',
                                                            'display': '',
                                                            'height': '',
                                                            'position': ''
                                                        });
                                                        $(
                                                                '.filter-location-select-overlay .group-wrapper'
                                                            )
                                                            .css({
                                                                'width': '',
                                                                'margin-left': '',
                                                                'height': '',
                                                                'overflow-y': '',
                                                                'top': ''
                                                            });
                                                    });
                                            if (mobileMode) {
                                                $('.filter-results-bar').hide();
                                            }
                                        }
                                        return false;
                                    });

                                    $('.location-wrapper').on('click', function () {
                                        if (mobileMode) {
                                            var winwidth = $(document.body).width();
                                            var scrollTop = $(document.body).scrollTop();
                                            var currentoverflow = $('#appointment_lightbox').css(
                                                'overflow');
                                            var oheight = Math.max($('.filter-location-select-overlay')
                                                .outerHeight(), $(window).height());
                                            $('#appointment_lightbox').css({
                                                'height': oheight,
                                                'overflow': 'hidden'
                                            }).scrollTop(scrollTop);
                                            $('.filter-location-select-overlay').css({
                                                'top': scrollTop
                                            });
                                            $('.filter-location-select-overlay .group-wrapper').css({
                                                'margin-left': -winwidth,
                                                'width': '100%',
                                                'height': oheight
                                            });
                                            $('.filter-location-select-overlay').one('close', function () {
                                                $('#appointment_lightbox').off(
                                                    'click.close_overlay');
                                                $('#appointment_lightbox').css({
                                                    'height': $('.picker-controls').css(
                                                            'position') == 'absolute' ?
                                                        Math.max($('.picker-controls').outerHeight(),
                                                            $(window).height()) : '',
                                                    'overflow': currentoverflow
                                                });
                                            });

                                            // Ensure the bar is visible in mobile mode
                                            $('.filter-results-bar').show();
                                        } else if ($('.picker-results').css('overflow-y') !== 'scroll') {
                                            // full window scroll
                                            $('.filter-location-select-overlay').css({
                                                'position': 'fixed',
                                                'top': 0,
                                                'left': 0,
                                                'height': $(window).height() - ($('html').hasClass(
                                                    'lt-ie8') ? 67 : 0), // IE7 Hack
                                                'overflow-y': 'hidden'
                                            });
                                            $('.filter-location-select-overlay .group-wrapper').css({
                                                'width': 261,
                                                'margin-left': -261,
                                                'height': '',
                                                'overflow-y': ''
                                            });
                                        } else {
                                            // lightbox internal scroll
                                            $('.filter-location-select-overlay .group-wrapper').css({
                                                'width': 261,
                                                'margin-left': -261,
                                                'height': '',
                                                'overflow-y': ''
                                            });
                                            if ($('html').hasClass('lt-ie8')) {
                                                $('.filter-location-select-overlay').css('height', $(
                                                    '#appointment_lightbox').height() - 67);
                                            }
                                        }
                                        $('.filter-location-select-overlay').show();
                                        $('.filter-location-select-overlay .group-wrapper').animate({
                                            'margin-left': 0
                                        }, 200, function () {
                                            $('.filter-location-select-overlay').css({
                                                'overflow-y': 'auto'
                                            });
                                            $('#appointment_lightbox').one(
                                                'click.close_overlay',
                                                function () {
                                                    $('.filter-location-select-overlay').trigger(
                                                        'close');
                                                    return false;
                                                });
                                        });
                                        return false;
                                    });

                                    $('.group-wrapper .filter-location-profile').on('click', function () {
                                        $('.filter-location-profile').removeClass('profile-selected');
                                        $(this).addClass('profile-selected');
                                        $('.location-wrapper').html($(this).clone());
                                        if (blockForm) {
                                            blockData.location = $(this).data('location');
                                            current_location = blockData.location;
                                            $('.datewidget').datepicker('fill');
                                        } else {
                                            $(document).trigger('change-location', [$(this).data(
                                                'location')]);
                                        }
                                        $('.filter-location-select-overlay').trigger('close');
                                        return false;
                                    });

                                    $('#appt_specialty_select').change(function () {
                                        var specialty = $(this).val();
                                        var current_location_id = $(
                                            '.location-wrapper .filter-location-profile').data(
                                            'location');
                                        var force_change = false;
                                        $('.group-wrapper .filter-location-profile').each(function (idx,
                                            elem) {
                                            // if ($(this).data('location') == 0 ||
                                            //      $(this).data('all-specialties') ||
                                            //      $.inArray(specialty, $(this).data('specialties').split(','))) {
                                            //  $(this).show();
                                            // } else {
                                            if ($(this).data('location') == current_location_id)
                                                force_change = true;
                                            $(this).hide();
                                            // }
                                        });
                                        if (force_change) {
                                            // select first visible value...
                                            $('.group-wrapper .filter-location-profile:visible:first').click();
                                        }
                                    });

                                    // Choose doctor CTA
                                    $('.filter-results-cta').on("click", function (e) {
                                        $(this).animate({
                                            opacity: 0
                                        }, 200, function () {
                                            $(this).removeClass('visible-cta').hide();
                                            setTimeout(function () {
                                                $("#filter-option-location").stop().css({
                                                    "display": "block",
                                                    "opacity": 0
                                                }).animate({
                                                    opacity: 1
                                                }, 300);
                                            }, 30);
                                        });
                                    });

                                    // custom drop down
                                    function DropDown(el) {
                                        this.dd = el;
                                        this.placeholder = this.dd.find('.selected-filter-option');
                                        this.opts = this.dd.find('li');
                                        this.val = '';
                                        this.relSelect = this.dd.attr("data-relselect");
                                        this.relSelectVal = '';
                                        this.index = -1;
                                        this.initEvents();
                                    }
                                    DropDown.prototype = {
                                        initEvents: function () {
                                            var obj = this;

                                            obj.dd.on('click', function (event) {
                                                var self = $(this);
                                                $('.filter-select-wrap').not(self).removeClass(
                                                        'active').find('.filter-select-options')
                                                    .hide();

                                                if (self.hasClass('active')) {
                                                    self.removeClass('active').find(
                                                        '.filter-select-options').hide();
                                                } else {
                                                    self.find('.filter-select-options').stop().css({
                                                        "display": "block",
                                                        "opacity": 0
                                                    }).animate({
                                                        opacity: 1
                                                    }, 100);
                                                    self.addClass('active');
                                                }

                                                return false;
                                            });

                                            obj.opts.on('click', function () {
                                                var opt = $(this);
                                                obj.val = opt.html();
                                                obj.index = opt.index();
                                                obj.placeholder.html(obj.val);
                                                obj.relSelectVal = opt.attr("data-val");

                                                // update selected class
                                                obj.opts.removeClass("selected");
                                                opt.addClass("selected");

                                                // change related select box value
                                                $('#' + obj.relSelect).val(obj.relSelectVal).change();
                                            });
                                        },
                                        getValue: function () {
                                            return this.val;
                                        },
                                        getIndex: function () {
                                            return this.index;
                                        }
                                    }

                                    $('.filter-select-wrap').each(function () {
                                        var dd = new DropDown($(this));
                                    });

                                    $(document).click(function (e) {
                                        $('.filter-select-wrap').removeClass('active').find(
                                            '.filter-select-options').hide();
                                    });




                                    $(
                                        '.picker-controls-mobile-close, .picker-controls-show-appointments-button'
                                    ).click(function () {
                                        $('.picker-controls').trigger('close')
                                    });

                                    // mobile mode fix top bar height...
                                    var FIXED_TOP_HEIGHT = 55;

                                    $('#mobile-fixed-top-bar a')
                                        .click(function (e) {
                                            if (!mobileMode) return;
                                            show_overlays = false;
                                            blockForm = true;
                                            var pc = $('.picker-controls');
                                            var spacer = $('<div></div>')
                                                .css({
                                                    'height': pc.outerHeight()
                                                })
                                                .insertBefore(pc);
                                            $(
                                                '.picker-controls-mobile-close, .picker-controls-show-appointments-bar'
                                            ).show();
                                            prevent_scroll_callbacks = true;
                                            var scrollTop = $(window).scrollTop();
                                            $('.picker-controls').css('height', 'auto'); // change to auto height
                                            var oheight = Math.max($('.picker-controls').outerHeight() + 65,
                                                $(window).height());
                                            $('.picker-controls')
                                                .css({
                                                    'position': 'absolute',
                                                    'top': $('#appointment_lightbox').scrollTop() -
                                                        oheight,
                                                    'left': 0,
                                                    'z-index': 11,
                                                    'height': oheight
                                                });

                                            $('#appointment_lightbox')
                                                .css({
                                                    'height': Math.max($('.picker-controls').outerHeight(),
                                                        $(window).height()),
                                                    'overflow': 'hidden'
                                                })
                                                .on('scroll.overlaypos', function () {
                                                    $('.picker-controls').css({
                                                        'top': $('#appointment_lightbox').scrollTop()
                                                    });
                                                })
                                                .scrollTop(scrollTop);

                                            $(window)
                                                .on('resize.overlaypos', function (e) {
                                                    $('.picker-controls').css('height', 'auto');
                                                    $('.picker-controls, #appointment_lightbox').css({
                                                        'height': Math.max($('.picker-controls')
                                                            .outerHeight() + 65, $(window).height()
                                                        )
                                                    });
                                                });

                                            $('.picker-controls')
                                                .one('close', function (e) {
                                                    $('#appointment_lightbox').off('scroll.overlaypos');
                                                    $(window).off('resize.overlaypos');
                                                    if (blockData.date) {
                                                        setCalendarDate(blockData.date);
                                                        $('#appointment_lightbox').trigger(
                                                            'scroll-to-date', [blockData.date, true]
                                                        );
                                                    }
                                                    if (blockData.specialty) {
                                                        $(document).trigger('change-specialty', [
                                                            blockData.specialty
                                                        ]);
                                                    }
                                                    if (blockData.location !== null) {
                                                        $(document).trigger('change-location', [
                                                            blockData.location
                                                        ]);
                                                    }
                                                    blockData = {};
                                                    $('.picker-controls')
                                                        .css({
                                                            'height': $(document.body).height(),
                                                            'overflow': 'hidden'
                                                        })
                                                        .clearQueue().animate({
                                                            'top': $('#appointment_lightbox').scrollTop() -
                                                                $('.picker-controls').outerHeight()
                                                        }, function () {
                                                            spacer.remove();
                                                            $(
                                                                '.picker-controls-mobile-close, .picker-controls-show-appointments-bar'
                                                            ).hide();
                                                            var small = $(window).height() < 768;
                                                            $('.picker-controls').css({
                                                                'position': '',
                                                                'top': '',
                                                                'left': '',
                                                                'z-index': '',
                                                                'height': small ?
                                                                    FIXED_TOP_HEIGHT : '',
                                                                'overflow': small ?
                                                                    'hidden' : 'visible',
                                                                'padding-bottom': small ? 0 :
                                                                    ''
                                                            });
                                                            var scrollto = $(
                                                                '#appointment_lightbox').scrollTop();
                                                            $('#appointment_lightbox').css({
                                                                'height': '',
                                                                'overflow': ''
                                                            }).scrollTop(0);
                                                            $(window).scrollTop(scrollto);
                                                            prevent_scroll_callbacks = false;
                                                            show_overlays = true;
                                                            blockForm = false;
                                                            $(window).scroll();
                                                        });
                                                })
                                                .animate({
                                                    'top': scrollTop
                                                });
                                            return false;
                                        });


                                    $(window).resize(function (e, init) {
                                        var width = window.innerWidth || document.documentElement.clientWidth ||
                                            document.body.clientWidth; // $('#appointment_lightbox').width();
                                        var isDesktop = !mobileMode && width > 600;

                                        if (isDesktop) {
                                            if (!$(".filter-only-location").length) {
                                                FIXED_TOP_HEIGHT = 75;
                                            }
                                            $("#mobile-fixed-date-bar").css({
                                                "margin-top": FIXED_TOP_HEIGHT
                                            });
                                        } else {
                                            FIXED_TOP_HEIGHT = 55;
                                        }

                                        if ($('html').hasClass('lt-ie8')) {
                                            //ie 7 widget hacks
                                            if ($('#appointment_lightbox').hasClass(
                                                    'prac-appt-lightbox')) {
                                                $('.picker-results').width($('#appointment_lightbox').width() -
                                                    260);
                                            } else {
                                                $('.picker-results').width(width - 260);
                                            }
                                        }

                                        if (!mobileMode && width <= 600 && !$('html').hasClass('lt-ie9')) {

                                            mobileMode = true;

                                            var current_date_top = -1;
                                            var show_overlays = true;

                                            $('#appointment_lightbox').addClass(
                                                'responsive-narrow-mode');

                                            // remove fixed panels...
                                            $('#mobile-fixed-date-bar, #mobile-fixed-more-bar').remove();

                                            if ($(window).height() < 768) {
                                                // show bar if going into compact mode...
                                                $('#mobile-fixed-top-bar').show();
                                            }

                                            // add in document width stuff...
                                            $(
                                                '<div id="mobile-fixed-date-bar" class="mobile-fixed-date-bar-small"></div>'
                                            ).css('top', FIXED_TOP_HEIGHT + 'px').appendTo(
                                                '#appointment_lightbox');
                                            $(
                                                    '<div id="mobile-fixed-more-bar"><div class="background"><span class="icon-white icon-chevron-down"></span> More Appointments <span class="icon-white icon-chevron-down"></span></div></div>'
                                                )
                                                .appendTo('#appointment_lightbox')
                                                .click(function (e) {
                                                    $(document.body).animate({
                                                        'scrollTop': $(window).scrollTop() +
                                                            $(window).height()
                                                    }, 'fast');
                                                });

                                            $('div.scroll-overlay').hide();

                                            $(window).on('scroll.mobileMode', function (e) {
                                                // console.log("Scroll Mobile", $(window).scrollTop(), show_overlays);

                                                //scroll: mobile

                                                if (!show_overlays) {
                                                    $(
                                                        '#mobile-fixed-top-bar:visible, #mobile-fixed-date-bar:visible, #mobile-fixed-more-bar:visible'
                                                    ).hide();
                                                    return;
                                                }

                                                if (prevent_scroll_callbacks === true) {
                                                    return;
                                                }

                                                var top_panel_height = $('.picker-controls').outerHeight();

                                                var top = $(window).scrollTop();
                                                if (top >= top_panel_height - FIXED_TOP_HEIGHT ||
                                                    $(window).height() < 768) {
                                                    $('#mobile-fixed-top-bar:hidden').show();
                                                } else {
                                                    $(
                                                        '#mobile-fixed-top-bar:visible, #mobile-fixed-date-bar:visible'
                                                    ).hide();
                                                    return;
                                                }
                                                var prevtop = 0,
                                                    prevdate = null,
                                                    nexttop = 0,
                                                    nextdate = null;
                                                $('div.picker-results-day').each(function (idx,
                                                    elem) {
                                                    var daytop = $(this).offset().top;
                                                    if (daytop > top + FIXED_TOP_HEIGHT) {
                                                        nextdate = this;
                                                        nexttop = daytop;
                                                        return false;
                                                    }
                                                    prevtop = daytop;
                                                    prevdate = this;
                                                });

                                                var fixeddatebar = $('#mobile-fixed-date-bar');
                                                if (prevtop != current_date_top) {
                                                    current_date_top = prevtop;
                                                    fixeddatebar.html($(prevdate).find(
                                                        '.picker-results-date').clone())
                                                }
                                                var fdb_height = $(prevdate).find(
                                                    '.picker-results-date').outerHeight();
                                                fixeddatebar.css({
                                                    top: (nexttop - top >
                                                        FIXED_TOP_HEIGHT && nexttop -
                                                        top < fdb_height +
                                                        FIXED_TOP_HEIGHT ? (nexttop -
                                                            top - fdb_height) :
                                                        FIXED_TOP_HEIGHT),
                                                    display: 'block'
                                                });

                                                var caldate = (nexttop - top > FIXED_TOP_HEIGHT &&
                                                    nexttop - top < fdb_height +
                                                    FIXED_TOP_HEIGHT ? nextdate : prevdate);
                                                if (caldate) {
                                                    setCalendarDate(caldate.id.substring(12));
                                                }

                                                // bottom bar show hide...
                                                if (top + $(window).height() >= $(document.body)
                                                    .prop('scrollHeight')) {
                                                    $('#mobile-fixed-more-bar:visible').hide();
                                                } else {
                                                    $('#mobile-fixed-more-bar:hidden').show();
                                                }

                                            }).scroll();

                                            $('#appointment_lightbox').off('scroll-to-date.desktop');
                                            $('#appointment_lightbox').on('scroll-to-date.mobileMode',
                                                function (e, dt, force) {
                                                    var dtstring = dt.getUTCFullYear() + '-' + (dt.getUTCMonth() <
                                                            9 ? '0' : '') + (dt.getUTCMonth() + 1) +
                                                        '-' + (dt.getUTCDate() < 10 ? '0' : '') + (
                                                            dt.getUTCDate());
                                                    var show = $('.picker-results #picker-date-' +
                                                        dtstring);
                                                    if (show.length) {
                                                        var scrollto = Math.ceil(show.offset().top) -
                                                            FIXED_TOP_HEIGHT;
                                                        var scrolltoheight = show.outerHeight();
                                                        var scrollerheight = $('.picker-results').height();
                                                        if (scrollto != 0) {
                                                            // scroll date into view...
                                                            prevent_scroll_callbacks = true;
                                                            $('#mobile-fixed-date-bar').html('');
                                                            prevtop = -1;
                                                            var scroller = !show_overlays ? $(
                                                                '#appointment_lightbox') : $(
                                                                'html,body');
                                                            if (!show_overlays) scrollto +=
                                                                scroller.scrollTop();
                                                            if (!force) {
                                                                scroller.animate({
                                                                    'scrollTop': scrollto +
                                                                        $('.picker-results')
                                                                        .scrollTop()
                                                                }, 'fast', function () {
                                                                    // delay to fire after all the scroll events..
                                                                    window.setTimeout(
                                                                        function () {
                                                                            prevent_scroll_callbacks
                                                                                = false;
                                                                            $(document.body)
                                                                                .trigger(
                                                                                    'scroll',
                                                                                    [
                                                                                        true
                                                                                    ]);
                                                                        }, 100);
                                                                });
                                                            } else {
                                                                // if force just go there...
                                                                scroller.scrollTop(scrollto + $(
                                                                    '.picker-results').scrollTop());
                                                                window.setTimeout(function () {
                                                                    prevent_scroll_callbacks
                                                                        = false;
                                                                    $(window).trigger(
                                                                        'scroll', [true]
                                                                    );
                                                                }, 100);
                                                            }
                                                        }
                                                    }
                                                    return false;
                                                });

                                        } else if (init || (mobileMode && width > 600)) {
                                            mobileMode = false;

                                            $('#appointment_lightbox').removeClass(
                                                'responsive-narrow-mode');
                                            // resize picker
                                            $('.picker-controls').css({
                                                'height': '',
                                                'overflow': '',
                                                'padding-bottom': ''
                                            });
                                            // remove scroll event
                                            $(window).off('scroll.mobileMode');
                                            $(window).off('scroll.desktopMode');
                                            $('.picker-results').off('scroll.lightbox');
                                            // remove fixed panels...
                                            $('#mobile-fixed-top-bar').hide();
                                            $('#mobile-fixed-date-bar, #mobile-fixed-more-bar').remove();

                                            // hide show fixed date header and footer in scrolling appts
                                            var prevtop = -1;
                                            if ($('.picker-results').css('overflow-y') === 'scroll') {
                                                // Lightbox inline mode...
                                                $('.picker-results').on('scroll.lightbox', function (e,
                                                    noupdate) {

                                                    //scroll: modal
                                                    if ($(".filter-no-options").length) {
                                                        FIXED_TOP_HEIGHT = 0
                                                    }

                                                    if (prevent_scroll_callbacks === true) {
                                                        return;
                                                    }
                                                    stop = $(this).scrollTop();
                                                    if (stop > 0) {
                                                        //if (prevtop > 0) return;
                                                        var current = null;
                                                        var ptop = 0;
                                                        var nexttop = -1;
                                                        var next = null;
                                                        $(this).find('.picker-results-day').each(
                                                            function (idx, elem) {
                                                                var newtop = $(this).position()
                                                                    .top;
                                                                if (Math.ceil(newtop) >
                                                                    FIXED_TOP_HEIGHT) {
                                                                    nexttop = Math.ceil(
                                                                        newtop);
                                                                    next = this;
                                                                    return false;
                                                                }
                                                                ptop = newtop + stop;
                                                                current = this;
                                                            });
                                                        var fhh = Math.floor($(current).find(
                                                            'div.picker-results-date:first'
                                                        ).outerHeight()) + FIXED_TOP_HEIGHT;

                                                        if (ptop != prevtop) {
                                                            $(this).find('.fixed-header').remove();
                                                            prevtop = ptop;
                                                            fixed = $(current).find(
                                                                'div.picker-results-date:first'
                                                            ).clone();
                                                            fixed.css({
                                                                'position': 'absolute',
                                                                'z-index': 10,
                                                                'top': (nexttop >= 0 &&
                                                                    nexttop <= fhh ?
                                                                    nexttop - fhh :
                                                                    0),
                                                                'margin-top': FIXED_TOP_HEIGHT,
                                                                'width': $(current).width()
                                                            });
                                                            fixed.addClass('fixed-header');
                                                            $(current).before(fixed);
                                                            if (noupdate !== true)
                                                                setCalendarDate((nexttop >= 0 &&
                                                                    nexttop <= fhh ? next :
                                                                    current).id.substring(
                                                                    12));
                                                        } else {
                                                            if (nexttop - FIXED_TOP_HEIGHT >= 0 &&
                                                                nexttop <= fhh) {
                                                                $(this).find('.fixed-header').css(
                                                                    'top', nexttop - fhh);
                                                                if (noupdate !== true)
                                                                    setCalendarDate(next.id.substring(
                                                                        12));
                                                            } else {
                                                                $(this).find('.fixed-header').css({
                                                                    'top': 0,
                                                                    'margin-top': FIXED_TOP_HEIGHT
                                                                });
                                                                if (noupdate !== true)
                                                                    setCalendarDate(current.id.substring(
                                                                        12));
                                                            }
                                                        }
                                                    } else {
                                                        prevtop = -1;
                                                        $(this).find('.fixed-header').remove();
                                                        if (noupdate !== true) setCalendarDate(
                                                            $(this).find(
                                                                '.picker-results-day:first'
                                                            )[0].id.substring(12));
                                                    }

                                                    if ($('.picker-results').prop(
                                                            'scrollHeight') - FIXED_TOP_HEIGHT >
                                                        $('.picker-results').height() + $(
                                                            '.picker-results').scrollTop() + 50
                                                    ) {
                                                        $('.scroll-overlay.bottom').clearQueue()
                                                            .animate({
                                                                'bottom': 0
                                                            });
                                                    } else {
                                                        $('.scroll-overlay.bottom').clearQueue()
                                                            .animate({
                                                                'height': 0,
                                                                'padding': 0
                                                            });
                                                    }

                                                });


                                                $('.scroll-overlay.bottom').click(function (e) {
                                                    $('.picker-results').clearQueue().animate({
                                                        'scrollTop': $(
                                                                '.picker-results').scrollTop() +
                                                            $('.picker-results').height()
                                                    });
                                                });

                                            } else {
                                                // full window mode

                                                $(
                                                    '<div id="mobile-fixed-date-bar" class="mobile-fixed-date-bar-big"></div>'
                                                ).appendTo('#appointment_lightbox');
                                                $(
                                                        '<div id="mobile-fixed-more-bar" class="mobile-fixed-more-bar-big"><div class="background"><span class="icon-white icon-chevron-down"></span> More Appointments <span class="icon-white icon-chevron-down"></span></div></div>'
                                                    )
                                                    .appendTo('#appointment_lightbox')
                                                    .click(function (e) {
                                                        $('html,body').animate({
                                                            'scrollTop': $(window).scrollTop() +
                                                                $(window).height()
                                                        }, 'fast');
                                                    });

                                                var current_date_top = -1;

                                                $(window).on('scroll.desktopMode', function (e,
                                                    noupdate) {

                                                    //scroll: desktop
                                                    if ($(".filter-no-options").length) {
                                                        FIXED_TOP_HEIGHT = 0
                                                    }

                                                    if (prevent_scroll_callbacks === true) {
                                                        return;
                                                    }
                                                    var top_panel_height = $('.picker-controls')
                                                        .outerHeight();

                                                    var top = $(window).scrollTop();
                                                    var prevtop = 0,
                                                        prevdate = null,
                                                        nexttop = 0,
                                                        nextdate = null;
                                                    $('div.picker-results-day').each(function (
                                                        idx, elem) {
                                                        var daytop = $(this).offset().top;
                                                        if (daytop > top +
                                                            FIXED_TOP_HEIGHT) {
                                                            nextdate = this;
                                                            nexttop = daytop;
                                                            return false;
                                                        }
                                                        prevtop = daytop;
                                                        prevdate = this;
                                                    });

                                                    var fixeddatebar = $(
                                                        '#mobile-fixed-date-bar');
                                                    if (prevtop != current_date_top) {
                                                        current_date_top = prevtop;
                                                        fixeddatebar.html($(prevdate).find(
                                                            '.picker-results-date').clone())
                                                    }
                                                    var fdb_height = $(prevdate).find(
                                                            '.picker-results-date').outerHeight() +
                                                        FIXED_TOP_HEIGHT;
                                                    fixeddatebar.css({
                                                        top: (nexttop - top > 0 &&
                                                            nexttop - top <
                                                            fdb_height ? (nexttop -
                                                                top - fdb_height) :
                                                            0),
                                                        'margin-top': FIXED_TOP_HEIGHT,
                                                        display: 'block'
                                                    });

                                                    var caldate = (nexttop - top > 0 && nexttop -
                                                        top < fdb_height ? nextdate :
                                                        prevdate);
                                                    if (caldate && !noupdate) {
                                                        setCalendarDate(caldate.id.substring(12));
                                                    }

                                                    if (top + $(window).height() >= $(document.body)
                                                        .prop('scrollHeight')) {
                                                        $('#mobile-fixed-more-bar:visible').hide();
                                                    } else {
                                                        $('#mobile-fixed-more-bar:hidden').show();
                                                    }
                                                }).scroll();
                                            }
                                            $('#appointment_lightbox').off('scroll-to-date.mobileMode');
                                            $('#appointment_lightbox').on('scroll-to-date.desktop',
                                                function (e, dt, force) {
                                                    if (!force && prevent_scroll_callbacks === true)
                                                        return;
                                                    var dtstring = dt.getUTCFullYear() + '-' + (dt.getUTCMonth() <
                                                            9 ? '0' : '') + (dt.getUTCMonth() + 1) +
                                                        '-' + (dt.getUTCDate() < 10 ? '0' : '') + (
                                                            dt.getUTCDate());
                                                    var show = $('.picker-results #picker-date-' +
                                                        dtstring);
                                                    if (show.length) {
                                                        var scrollto = Math.ceil(show.position().top) -
                                                            FIXED_TOP_HEIGHT;
                                                        var scrolltoheight = show.outerHeight();
                                                        var scrollerheight = $('.picker-results').height();
                                                        // scroll date into view...
                                                        prevent_scroll_callbacks = true;
                                                        $('.picker-results .fixed-header').remove();
                                                        prevtop = -1;
                                                        var scroller;
                                                        if ($('.picker-results').css('overflow-y') ===
                                                            'scroll') {
                                                            scroller = $('.picker-results');
                                                            scrollto += scroller.scrollTop();
                                                        } else {
                                                            scroller = $('body,html');
                                                        }
                                                        scroller.clearQueue().animate({
                                                            'scrollTop': scrollto
                                                        }, 'fast', function () {
                                                            // delay to fire after all the scroll events..
                                                            window.setTimeout(function () {
                                                                prevent_scroll_callbacks
                                                                    = false;
                                                                scroller.trigger(
                                                                    'scroll', [
                                                                        true
                                                                    ]);
                                                            }, 100);
                                                        });
                                                    }
                                                    return false;
                                                });
                                        }

                                        if (!mobileMode) {
                                            $('.picker-results .fixed-header, .scroll-overlay.bottom').width(
                                                $('.picker-results .picker-results-day:first').width()
                                            );
                                            if ($('.picker-results').prop('scrollHeight') -
                                                FIXED_TOP_HEIGHT > $('.picker-results').height() + $(
                                                    '.picker-results').scrollTop() + 50) {
                                                $('.scroll-overlay.bottom').clearQueue().animate({
                                                    'bottom': 0
                                                });
                                            } else {
                                                $('.scroll-overlay.bottom').clearQueue().animate({
                                                    'height': 0,
                                                    'padding': 0
                                                });
                                            }
                                            $('.filter-location-select-overlay').trigger('close');

                                        }

                                        if (mobileMode) {
                                            if ($(window).height() < 768 && $('.picker-controls').outerHeight() >
                                                FIXED_TOP_HEIGHT) {
                                                $('.picker-controls').css({
                                                    'height': FIXED_TOP_HEIGHT,
                                                    'overflow': 'hidden',
                                                    'padding-bottom': 0
                                                });
                                            } else if ($(window).height() >= 768 && $(
                                                    '.picker-controls').outerHeight() <=
                                                FIXED_TOP_HEIGHT) {
                                                $('.picker-controls').css({
                                                    'height': '',
                                                    'overflow': '',
                                                    'padding-bottom': ''
                                                });
                                            }
                                            $(document.body).scroll();
                                        }

                                        if ($(window).height() < 500 && !mobileMode && !$('html').hasClass(
                                                'lt-ie9')) {
                                            $('.filter-calendar-button button span.date-button').html($(
                                                '.datewidget').datepicker('getFormattedDate',
                                                'd MM yyyy'));
                                            $('.filter-calendar').hide();
                                            $('.filter-calendar-button').show();
                                        } else {
                                            $('.filter-calendar').show();
                                            $('.filter-calendar-button').hide();
                                        }


                                    }).trigger('resize', [true]);

                                    $('.filter-calendar-button').click(function (e) {
                                        $('.filter-calendar').css({
                                            'position': 'absolute',
                                            'display': 'block',
                                            'background-color': '#eeecf0',
                                            'z-index': '11',
                                            'top': $('.filter-calendar-button').position().top,
                                            'left': '-240px',
                                            'height': $(window).height() - $(
                                                '.filter-calendar-button').position().top
                                        }).animate({
                                            'left': 20
                                        }, 'slow');
                                        $(document).one('click.hide_calendar', function () {
                                            $('.filter-calendar').animate({
                                                'left': -240
                                            }, 'slow', function (e) {
                                                $('.filter-calendar').css({
                                                    'position': '',
                                                    'display': 'none',
                                                    'background-color': '',
                                                    'z-index': '',
                                                    'top': '',
                                                    'left': '',
                                                    'height': ''
                                                });
                                            });
                                        });
                                        return false;
                                    });

                                    $(document).trigger('loaded-data');
                                    window.setTimeout(function () {
                                        setCalendarDate(firstApptDate);
                                        $('#appointment_lightbox').trigger('scroll-to-date', [
                                            firstApptDate, true
                                        ]);
                                    }, 300);

                                    function getUrlVars() {
                                        var vars = [],
                                            hash;
                                        var hashes = window.location.href.slice(window.location.href.indexOf(
                                            '?') + 1).split('&');
                                        for (var i = 0; i < hashes.length; i++) {
                                            hash = hashes[i].split('=');
                                            vars.push(hash[0]);
                                            vars[hash[0]] = hash[1];
                                        }
                                        return vars;
                                    }

                                    (function (urlVars) {

                                        var specialty = urlVars['specialty'] || urlVars['procedure'];
                                        var $specialty_select = $('#appt_specialty_select');
                                        if (typeof specialty !== 'undefined' && (specialty =
                                                decodeURIComponent(specialty)) && $specialty_select.find(
                                                'option[value="' + specialty + '"]').length > 0) {
                                            $specialty_select.val(specialty).change();
                                        }

                                        var location = urlVars['location'] || urlVars['grp_loc_id'];
                                        var $location_select = $('#appt_location_select_mobile');
                                        if (typeof location !== 'undefined' && (location =
                                                decodeURIComponent(location)) && parseInt(location) != 0 &&
                                            $location_select.find('option[value="' + location + '"]').length >
                                            0) {
                                            $location_select.val(location).change();
                                        }

                                    })(getUrlVars());

                                });
                            </script>
                        </div>

                    </div>
                </div>

            </div>
            <div id="floating-appts-area" class="practitioner-profile">
                <div class="no-appointments-wrapper">
                    <div class="no-appointments">
                        <p class="he-border-btm">Appointments currently not published on HealthEngine&#039;s directory</p>
                        <a href="tel:(08)&nbsp;9345&nbsp;2668" class="notify-prac">
                            Please call (08)&nbsp;9345&nbsp;2668 </a>
                    </div>
                </div>
            </div>

            <script>
                (function () {
                    var floatingApptsArea = $('#floating-appts-area');
                    var mobileApptsArea = $('<div id="mobile-appts-area"></div>');
                    var mobileHeaderDetails = $('.mobile-header-details');
                    var noAppointmentsWrapper = $('.no-appointments-wrapper');

                    if ($('.appointments-preview').length) {
                        mobileApptsArea.insertAfter('#panelMain .container .profile-header-wrapper');

                        $(window).resize(function () {
                            var isDesktop = floatingApptsArea.is(":visible");

                            if (isDesktop) {
                                if (!$('.appointments-preview').parent('#floating-appts-area').length) {
                                    $('.appointments-preview').detach().appendTo('#floating-appts-area');
                                }
                            } else {
                                if (!$('.appointments-preview').parent('#mobile-appts-area').length) {
                                    $('.appointments-preview').detach().appendTo('#mobile-appts-area');
                                }
                            }
                        }).resize();
                    }

                    if (noAppointmentsWrapper.length === 1) {
                        mobileHeaderDetails.after(mobileApptsArea);

                        $(window).resize(function () {
                            var isDesktop = floatingApptsArea.is(":visible");

                            if (isDesktop) {
                                if (!noAppointmentsWrapper.parent('#floating-appts-area').length) {
                                    noAppointmentsWrapper.detach().appendTo(floatingApptsArea);
                                }
                            } else {
                                if (!noAppointmentsWrapper.parent('#mobile-appts-area').length) {
                                    noAppointmentsWrapper.detach().appendTo(mobileApptsArea);
                                }
                            }

                        }).resize();
                    }
                })();
            </script>

            <footer id="footer" class="row full-width he-blue-bg">
                <div class="span12 footer">
                    <div class="footer-column clearfix">
                        <p class="footer-heading">HealthEngine</p>
                        <ul>
                            <li><a href="http://support.healthengine.com.au/" target="_blank">Contact Us</a></li>
                            <li><a href="https://about.healthengine.com.au/" target="_blank">About Us</a></li>
                            <li><a href="https://practices.healthengine.com.au/?pracsource=footer-prac-services">Practice
                                    Services</a></li>
                            <li><a href="http://blog.healthengine.com.au" target="_blank">Blog</a></li>
                            <li><a href="/press/">Press Centre</a></li>
                            <li><a href="http://careers.healthengine.com.au/?utm_source=healthengine&amp;utm_medium=footerlink&amp;utm_campaign=healthenginefooter">Careers</a></li>
                            <li><a href="/info/">Health Articles</a></li>
                            <li><a href="/app/">Mobile App</a></li>
                        </ul>
                    </div>
                    <div class="footer-column clearfix">
                        <p class="footer-heading">Appointments</p>
                        <ul>
                            <li><a href="/appointments/gp/">GP Appointments</a></li>
                            <li><a href="/appointments/after-hours/gp/">After Hours GP Appointments</a></li>
                            <li><a href="/appointments/bulk-billing-gp/">Bulk Billing GP Appointments</a></li>
                            <li><a href="/appointments/dentist/">Dentist Appointments</a></li>
                            <li><a href="/appointments/physiotherapist/">Physiotherapist Appointments</a></li>
                            <li><a href="/appointments/chiropractor/">Chiropractor Appointments</a></li>
                            <li><a href="/appointments/psychologist/">Psychologist Appointments</a></li>
                            <li><a href="https://practices.healthengine.com.au/?pracsource=footer-list-appointments">List
                                    Your Appointments</a></li>
                            <li><a class="cancel-appts-link" href="https://support.healthengine.com.au/hc/en-us/articles/210618263-How-can-I-cancel-an-appointment-I-booked-online-"
                                    target="_blank">Cancel Appointment</a></li>
                        </ul>
                    </div>
                    <div class="footer-column clearfix">
                        <p class="footer-heading">Directory</p>
                        <ul>
                            <li><a href="/findapractitioner.php">Find a Practitioner</a></li>
                            <li><a href="https://practices.healthengine.com.au/claim-your-profile/?pracsource=footer-list-practice">List
                                    Your Practice</a></li>
                            <li><a href="/find/dentist/Near-Me/">Find a Dentist</a></li>
                            <li><a href="https://privacy.healthengine.com.au/">Privacy and Security</a></li>
                        </ul>
                    </div>
                    <div class="footer-column clearfix">
                        <p class="footer-heading hidden-phone">Login</p>
                        <ul class="hidden-phone">
                            <li><a class="he-footer-practice-login prac-login btn btn-primary" href="/appointment/admin/">Practice
                                    Login</a></li>
                        </ul>
                    </div>
                    <div class="right-block">
                        <div>&copy; 2019 HealthEngine</div>
                        <div><a href="/terms.php">Terms of Use</a> | <a href="/privacy.php">Privacy Policy</a></div>
                        <div>
                            <a href="http://www.twitter.com/healthengine" target="_blank"><img src="https://healthengine.imgix.net/public/images/twitter-icon.png?auto=compress&ixlib=php-2.1.0&or=0"
                                    alt="Twitter" /></a>
                            <a href="http://www.facebook.com/healthengine" target="_blank"><img src="https://healthengine.imgix.net/public/images/facebook-icon.png?auto=compress&ixlib=php-2.1.0&or=0"
                                    alt="Facebook" /></a>
                            <a href="http://www.linkedin.com/company/healthengine" target="_blank"><img src="https://healthengine.imgix.net/public/images/linkedin-icon.png?auto=compress&ixlib=php-2.1.0&or=0"
                                    alt="LinkedIn" /></a>
                        </div>
                        <div class="app-btns-footer">
                            <a class="btn-app-store" href="https://he.app.link/LSkc7hD72T" target="_blank"><img src="https://healthengine.imgix.net/public/images/app-store-badge_20181015005910.svg?auto=compress&ixlib=php-2.1.0&or=0"></a>
                            <a class="btn-play-store" href="https://he.app.link/P9gz29172T" target="_blank"><img src="https://healthengine.imgix.net/public/images/google-play-badge_20181015005644.svg?auto=compress&ixlib=php-2.1.0&or=0"></a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
        <a href="https://support.healthengine.com.au/hc/en-us/categories/200431715-Patient" target="_blank" class="footer-help-btm"><span
                class="question-mark"></span><span class="mobile-hide">Help</span></a>




        <script src="//d2g92a8pyizotc.cloudfront.net/minify/g=profile_practitioner_js?v=20190214073553"></script>



        <div class="alpha-overlay"></div>
        <div style="display: none;">

            <script>
                heData = {
                    "pageData": {
                        "section": "Con",
                        "subSection": "Profile",
                        "pageType": "Practitioner"
                    },
                    "userData": {
                        "loggedIn": "Anonymous"
                    },
                    "practitionerData": {
                        "ID": "51858",
                        "practitionerName": "Dr Jinnan Cai",
                        "gender": "Male",
                        "state": "WA",
                        "postcode": "6060",
                        "suburb": "Yokine",
                        "primarySpecialty": "Acupuncture",
                        "specialties": "Acupuncture, Chinese Medicine",
                        "paidProfile": "true",
                        "locationCount": "3",
                        "hasCorporatePractice": "false",
                        "apptCount": "0",
                        "todayApptCount": "0",
                        "tomorrowApptCount": "0"
                    }
                };
            </script>
        </div>
    </main>
    <script type="text/javascript">
        try {
            _satellite.pageBottom();
        } catch (exception) {
            // Probably AdBlocker
        }
    </script>
    <script src="//d2g92a8pyizotc.cloudfront.net/minify/g=foot_js?v=20190214073553" defer></script>
</body>

</html>